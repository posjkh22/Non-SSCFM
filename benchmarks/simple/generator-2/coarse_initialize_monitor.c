#include <stdlib.h>
#include "aces_list.h" 

struct BBNode;
struct list;
typedef list INTEGRATED_CFG;
INTEGRATED_CFG* generate_path_tree();
void add_basicblock(INTEGRATED_CFG* ,unsigned int, unsigned int, unsigned int, unsigned int);

extern INTEGRATED_CFG* p_integrated_CFG;
extern unsigned int leverage_signature;

void initialize_monitor(unsigned int node_id)
{
	p_integrated_CFG = generate_path_tree();
	add_basicblock(p_integrated_CFG, 0x10001, 5, 1, 0x10001);
	add_basicblock(p_integrated_CFG, 0x10001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x10001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x10001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x10001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x10001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x10001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x10001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x20001, 5, 1, 0x20001);
	add_basicblock(p_integrated_CFG, 0x20001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x20001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x20001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x20001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x20001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x20001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x20001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x30001, 5, 1, 0x30001);
	add_basicblock(p_integrated_CFG, 0x30001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x30001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x30001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x30001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x30001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x30001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x30001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x40001, 5, 1, 0x40001);
	add_basicblock(p_integrated_CFG, 0x40001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x40001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x40001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x40001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x40001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x40001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x40001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x50001, 5, 1, 0x50001);
	add_basicblock(p_integrated_CFG, 0x50001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x50001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x50001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x50001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x50001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x50001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x50001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x60001, 5, 1, 0x60001);
	add_basicblock(p_integrated_CFG, 0x60001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x60001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x60001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x60001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x60001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x60001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x60001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x70001, 5, 1, 0x70001);
	add_basicblock(p_integrated_CFG, 0x70001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x70001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x70001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x70001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x70001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x70001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x70001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x80001, 5, 1, 0x80001);
	add_basicblock(p_integrated_CFG, 0x80001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x80001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x80001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x80001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x80001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x80001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x80001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x90001, 5, 1, 0x90001);
	add_basicblock(p_integrated_CFG, 0x90001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x90001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x90001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x90001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x90001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x90001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x90001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0xa0001, 5, 1, 0xa0002);
	add_basicblock(p_integrated_CFG, 0xa0002, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0xa0002, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0xa0002, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0xa0002, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0xa0002, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0xa0002, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0xa0002, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0xc0001, 5, 1, 0xc0001);
	add_basicblock(p_integrated_CFG, 0xc0001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0xc0001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0xc0001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0xc0001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0xc0001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0xc0001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0xc0001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0xd0001, 5, 1, 0xd0001);
	add_basicblock(p_integrated_CFG, 0xd0001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0xd0001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0xd0001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0xd0001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0xd0001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0xd0001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0xd0001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0xe0001, 5, 1, 0xe0001);
	add_basicblock(p_integrated_CFG, 0xe0001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0xe0001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0xe0001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0xe0001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0xe0001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0xe0001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0xe0001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0xf0001, 5, 1, 0xf0001);
	add_basicblock(p_integrated_CFG, 0xf0001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0xf0001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0xf0001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0xf0001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0xf0001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0xf0001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0xf0001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x100001, 5, 1, 0x100001);
	add_basicblock(p_integrated_CFG, 0x100001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x100001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x100001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x100001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x100001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x100001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x100001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x110001, 5, 1, 0x110001);
	add_basicblock(p_integrated_CFG, 0x110001, 5, 7, 0x120001);
	add_basicblock(p_integrated_CFG, 0x110001, 5, 7, 0x130001);
	add_basicblock(p_integrated_CFG, 0x110001, 5, 7, 0x140001);
	add_basicblock(p_integrated_CFG, 0x110001, 5, 7, 0x150001);
	add_basicblock(p_integrated_CFG, 0x110001, 5, 7, 0x160001);
	add_basicblock(p_integrated_CFG, 0x110001, 5, 7, 0x170001);
	add_basicblock(p_integrated_CFG, 0x110001, 5, 7, 0x180008);
	add_basicblock(p_integrated_CFG, 0x120001, 5, 3, 0x10001);
	add_basicblock(p_integrated_CFG, 0x120001, 5, 3, 0x20001);
	add_basicblock(p_integrated_CFG, 0x120001, 5, 3, 0x30001);
	add_basicblock(p_integrated_CFG, 0x120004, 5, 0, 0x0);
	add_basicblock(p_integrated_CFG, 0x130001, 5, 2, 0x40001);
	add_basicblock(p_integrated_CFG, 0x130001, 5, 2, 0x50001);
	add_basicblock(p_integrated_CFG, 0x130003, 5, 0, 0x0);
	add_basicblock(p_integrated_CFG, 0x140001, 5, 1, 0x60001);
	add_basicblock(p_integrated_CFG, 0x140002, 5, 0, 0x0);
	add_basicblock(p_integrated_CFG, 0x150001, 5, 4, 0x70001);
	add_basicblock(p_integrated_CFG, 0x150001, 5, 4, 0x80001);
	add_basicblock(p_integrated_CFG, 0x150001, 5, 4, 0x90001);
	add_basicblock(p_integrated_CFG, 0x150001, 5, 4, 0xa0001);
	add_basicblock(p_integrated_CFG, 0x150006, 5, 0, 0x0);
	add_basicblock(p_integrated_CFG, 0x160001, 5, 5, 0xc0001);
	add_basicblock(p_integrated_CFG, 0x160001, 5, 5, 0xd0001);
	add_basicblock(p_integrated_CFG, 0x160001, 5, 5, 0xe0001);
	add_basicblock(p_integrated_CFG, 0x160001, 5, 5, 0xf0001);
	add_basicblock(p_integrated_CFG, 0x160001, 5, 5, 0x100001);
	add_basicblock(p_integrated_CFG, 0x160006, 5, 0, 0x0);
	add_basicblock(p_integrated_CFG, 0x170001, 5, 1, 0x110001);
	add_basicblock(p_integrated_CFG, 0x170002, 5, 0, 0x0);
	add_basicblock(p_integrated_CFG, 0x180001, 5, 6, 0x120001);
	add_basicblock(p_integrated_CFG, 0x180001, 5, 6, 0x130001);
	add_basicblock(p_integrated_CFG, 0x180001, 5, 6, 0x140001);
	add_basicblock(p_integrated_CFG, 0x180001, 5, 6, 0x150001);
	add_basicblock(p_integrated_CFG, 0x180001, 5, 6, 0x160001);
	add_basicblock(p_integrated_CFG, 0x180001, 5, 6, 0x170001);
	add_basicblock(p_integrated_CFG, 0x180008, 5, 0, 0x0);

	return;
}

INTEGRATED_CFG* generate_path_tree()
{
	p_integrated_CFG = (INTEGRATED_CFG* )malloc(sizeof(INTEGRATED_CFG));
	init(p_integrated_CFG);
	BBNode* p_bb_init = (BBNode*)malloc(sizeof(BBNode));
	p_bb_init->node_id = leverage_signature;
	p_bb_init->connectionType = 1;
	p_bb_init->connectionNum = 1;
	p_bb_init->connectionArr = (unsigned int*)malloc(sizeof(unsigned int) * p_bb_init->connectionNum);
	p_bb_init->connectionArr[0] = 0x180001;
	insert(p_integrated_CFG, p_bb_init);

	return p_integrated_CFG;
}

